@model BaoCaoWeb.Models.ThongTin

<style>
    .chartdiv {
        width: auto;
        height: 600px;
    }

    a {
        color: inherit;
    }
</style>
<script src="~/Scripts/bootstrap.bundle.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
<script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
<link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
<link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">

<script src="~/Scripts/anychart/jschartNhanDon.js"></script>

<script>
    $(document).ready(function () {
        getThongTin(1);
    });
    function getThongTin(SoNgay) {
        getThuHo(SoNgay);
        $("#vNhanDon").empty();
        getNhanDon(SoNgay);
        //getDiemBe(SoNgay);
    };
    function getThuHo(SoNgay) {
        $("#vThuHo tr").remove();
        $.ajax({
            type: 'POST',
            url: '/Home/getThuHo/',
            dataType: 'json',
            data: { SoNgay: SoNgay },
            success: function (data) {
                var items = '';
                $.each(data, function (i, item) {
                    var rows = "<tr>"
                        + "<td>" + item.NoiDung1 + "</td>"
                        + "<td>" + item.NoiDung2 + "</td>"
                        + "<td>" + item.NoiDung3 + "</td>"
                        + "<td>" + item.NoiDung4 + "</td>"
                    + "</tr>"
                    $("#vThuHo").append(rows);
                });
            },
            error: function (ex) {
                alert("Error: " + ex.statusText);
            }
        });
    };
    function getDiemBe(SoNgay) {
        $("#vDiemBe tr").remove();
        $.ajax({
            type: 'POST',
            url: '/Home/getDiemBe/',
            dataType: 'json',
            data: { SoNgay: SoNgay },
            success: function (data) {
                var items = '';
                $.each(data, function (i, item) {
                    var rows = "<tr>"
                        + "<td>" + item.NoiDung1 + "</td>"
                        + "<td>" + item.NoiDung2 + "</td>"
                        + "<td>" + item.NoiDung3 + "</td>"
                        + "<td>" + item.NoiDung4 + "</td>"
                        + "<td>" + item.NoiDung5 + "</td>"
                        + "<td>" + item.NoiDung6 + "</td>"
                    + "</tr>"
                    $("#vDiemBe").append(rows);
                });
            },
            error: function (ex) {
                alert("Error: " + ex.statusText);
            }
        });
    };
</script>

<div class="row">
    <div class="col-auto mb-4">
        <div class="card border-left-info shadow h-100">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="font-weight-bold text-info mb-1">
                            Số lượng khách hàng
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">@Model.KhachHang.ToString("N0").Replace(",", ".")</div>
                    </div>
                    <div class="col-auto">
                        <i class="fas fa-user fa-2x text-info"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Content Row -->

<div class="row">
    <div class="card shadow mb-4">
        <!-- Card Header - Dropdown -->
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">THỰC HIỆN CÁC CHỈ TIÊU TỔNG CÔNG TY GIAO ĐẾN NGÀY @DateTime.Now.ToString("dd/MM/yyyy")</h6>

        </div>
        <!-- Card Body -->
        <div class="card-body">
            <div class="table-responsive">
                <table id="tblSanLuong" class="table table-bordered text-dark h6 text-center">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Nội dung/Chỉ tiêu</th>
                            <th>Thực hiện</th>
                            <th>Tỷ lệ</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.lstSanLuong)
                        {
                            if (@item.Ky == 7)
                            {
                                <tr>
                                    <td class="align-middle">@item.Ky</td>
                                    <td>@item.NoiDung <div class="font-weight-bold text-danger mt-1">@item.KeHoach.ToString().Replace(",", ".")</div> </td>
                                    <td class="align-middle"><div class="font-weight-bold text-primary">@item.ThucHien.ToString().Replace(",", ".")</div></td>
                                    <td class="align-middle" style="width:200px">
                                        <div class="card-content">
                                            <div class="mb-2">
                                                <div class="progress" style="height:30px">
                                                    @if (@item.TyLe <= 25)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: red" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe <= 50)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: orange" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe <= 75)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: Gold" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe > 75)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: limegreen" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        @if (item.NoiDung3 != "")
                                        {
                                            <a class="btn btn-primary" href="@Url.Action(@item.NoiDung3, "Home")" role="button">Chi tiết</a>
                                        }
                                    </td>
                                </tr>
                            }
                            else
                            {
                                <tr>
                                    <td class="align-middle">@item.Ky</td>
                                    <td>@item.NoiDung <div class="font-weight-bold text-danger mt-1">@item.KeHoach.ToString("N0").Replace(",", ".")</div> </td>
                                    <td class="align-middle"><div class="font-weight-bold text-primary">@item.ThucHien.ToString("N0").Replace(",", ".")</div></td>
                                    <td class="align-middle" style="width:200px">
                                        <div class="card-content">
                                            <div class="mb-2">
                                                <div class="progress" style="height:30px">
                                                    @if (@item.TyLe <= 25)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: red" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe <= 50)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: orange" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe <= 75)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: Gold" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                    else if (@item.TyLe > 75)
                                                    {
                                                        <div class="progress-bar" role="progressbar"
                                                             style="width:@item.TyLe%; background-color: limegreen" aria-valuenow="100" aria-valuemin="0"
                                                             aria-valuemax="100"><b style="color:Blue">@item.TyLe.ToString().Replace(".", ",")%</b></div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        @if (item.NoiDung3 != "")
                                        {
                                            <a class="btn btn-primary" href="@Url.Action(@item.NoiDung3, "Home")" role="button">Chi tiết</a>
                                        }
                                    </td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="">
    <div class="card shadow mb-4">
        <!-- Card Header - Dropdown -->
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">THỐNG KÊ THEO NGÀY</h6>
            <div class="btn-group ml-2">
                <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                    Chọn ngày
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" onclick="getThongTin(1)">1</a></li>
                    <li><a class="dropdown-item" onclick="getThongTin(7)">7</a></li>
                    <li><a class="dropdown-item" onclick="getThongTin(14)">14</a></li>
                    <li><a class="dropdown-item" onclick="getThongTin(30)">30</a></li>
                    <li><a class="dropdown-item" onclick="getThongTin(60)">60</a></li>
                    <li><a class="dropdown-item" onclick="getThongTin(90)">90</a></li>
                </ul>
            </div>
        </div>
        <!-- Card Body -->
        <div class="card-body">
            <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Thu hộ tiền nước</h6>

                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="tblSanLuong" class="table table-striped table-bordered text-dark h6 text-center">
                            <thead>
                                <tr>
                                    <th>Đơn vị thu</th>
                                    <th>Số lượng</th>
                                    <th>Tổng cộng</th>
                                    <th>Tỷ lệ</th>
                                </tr>
                            </thead>
                            <tbody id="vThuHo"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Tiếp nhận yêu cầu khách hàng</h6>

                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div id="vNhanDon" style="height:500px"></div>
                </div>
            </div>
            <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Điểm bể ngầm</h6>

                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="tblSanLuong" class="table table-striped table-bordered text-dark h6 text-center">
                            <thead>
                                <tr>
                                    <th>Quận</th>
                                    <th>Loại bể</th>
                                    <th>Tiếp nhận</th>
                                    <th>Đã sửa</th>
                                    <th>Không bể</th>
                                    <th>Tồn</th>
                                </tr>
                            </thead>
                            <tbody id="vDiemBe"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




